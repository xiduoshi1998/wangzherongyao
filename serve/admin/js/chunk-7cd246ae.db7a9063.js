(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7cd246ae"],{"75e2":function(e,t,r){},a409:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v(e._s(e.id?"编辑":"新建")+"物品")]),r("el-form",{ref:"ruleForm",attrs:{"label-width":"120px",model:e.model,rules:e.rules},nativeOn:{submit:function(t){return t.preventDefault(),e.save("ruleForm")}}},[r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),r("el-form-item",{attrs:{label:"图标"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$http.defaults.baseURL+"/upload","show-file-list":!1,"on-success":e.afterUpload,headers:e.headers}},[e.model.icon?r("img",{staticClass:"avatar",attrs:{src:e.model.icon}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",[r("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)},a=[],s=r("5530"),i=r("1da1"),c=(r("96cf"),r("34ce")),o={data:function(){return{id:this.$route.params.id,model:{name:""},rules:c["a"]}},computed:{headers:function(){return{Authorization:"Bearer "+(localStorage.token||"")}}},methods:{save:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=14;break}if(!t.id){e.next=7;break}return e.next=4,t.$http.put("rest/items/".concat(t.id),t.model);case 4:e.sent,e.next=10;break;case 7:return e.next=9,t.$http.post("rest/items",t.model);case 9:e.sent;case 10:t.$router.push("/items/list"),t.$message.success("保存成功"),e.next=15;break;case 14:return e.abrupt("return",t.$message.warning("内容不能为空"));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},fetchParent:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/items");case 2:r=t.sent,e.parents=r.data;case 4:case"end":return t.stop()}}),t)})))()},upload:function(){this.$http.post("/upload",this.model)},fetch:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/items/".concat(e.id));case 2:r=t.sent,e.model=Object(s["a"])(Object(s["a"])({},e.model),r.data);case 4:case"end":return t.stop()}}),t)})))()},afterUpload:function(e){this.$set(this.model,"icon",e.url)}},created:function(){this.fetchParent(),this.id&&this.fetch()}},u=o,l=(r("c0fc"),r("2877")),m=Object(l["a"])(u,n,a,!1,null,"183b0d85",null);t["default"]=m.exports},c0fc:function(e,t,r){"use strict";r("75e2")}}]);
//# sourceMappingURL=chunk-7cd246ae.db7a9063.js.map