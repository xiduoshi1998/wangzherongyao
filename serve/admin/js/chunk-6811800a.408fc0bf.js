(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6811800a"],{"99af":function(e,t,a){"use strict";var r=a("23e7"),l=a("d039"),s=a("e8b5"),n=a("861d"),o=a("7b0b"),i=a("50c4"),c=a("8418"),u=a("65f0"),m=a("1dde"),d=a("b622"),p=a("2d00"),f=d("isConcatSpreadable"),b=9007199254740991,h="Maximum allowed index exceeded",v=p>=51||!l((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),k=m("concat"),x=function(e){if(!n(e))return!1;var t=e[f];return void 0!==t?!!t:s(e)},y=!v||!k;r({target:"Array",proto:!0,forced:y},{concat:function(e){var t,a,r,l,s,n=o(this),m=u(n,0),d=0;for(t=-1,r=arguments.length;t<r;t++)if(s=-1===t?n:arguments[t],x(s)){if(l=i(s.length),d+l>b)throw TypeError(h);for(a=0;a<l;a++,d++)a in s&&c(m,d,s[a])}else{if(d>=b)throw TypeError(h);c(m,d++,s)}return m.length=d,m}})},b40b:function(e,t,a){"use strict";var r=a("1da1");function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,a){return t&&s(e.prototype,t),a&&s(e,a),e}a("96cf"),a("99af");var o=function(){function e(){l(this,e)}return n(e,[{key:"create",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,a,r,l,s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=14;break}if(!r){e.next=7;break}return e.next=4,t.$http.put("rest/".concat(l,"/").concat(r),t.model);case 4:e.sent,e.next=10;break;case 7:return e.next=9,t.$http.post("rest/".concat(l),s);case 9:e.sent;case 10:t.$router.push("/".concat(l,"/list")),t.$message.success("保存成功"),e.next=15;break;case 14:return e.abrupt("return",t.$message.warning("内容不能为空"));case 15:case"end":return e.stop()}}),e)})));function t(t,a,r,l,s){return e.apply(this,arguments)}return t}()}]),e}();t["a"]=new o},d81d:function(e,t,a){"use strict";var r=a("23e7"),l=a("b727").map,s=a("1dde"),n=s("map");r({target:"Array",proto:!0,forced:!n},{map:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}})},dd97:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v(e._s(e.id?"编辑":"新建")+"英雄")]),a("el-form",{ref:"ruleForm",attrs:{model:e.model,rules:e.rules,"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save("ruleForm")}}},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"基础信息"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),a("el-form-item",{attrs:{label:"称号",prop:"title"}},[a("el-input",{model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),a("el-form-item",{attrs:{label:"类型",prop:"categories"}},[a("el-select",{attrs:{multiple:""},model:{value:e.model.categories,callback:function(t){e.$set(e.model,"categories",t)},expression:"model.categories"}},e._l(e.categories,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("Score",{attrs:{model:e.model}}),a("div",[a("el-form-item",{attrs:{label:"顺风出装"}},[a("el-select",{attrs:{"value-key":"name",multiple:""},model:{value:e.model.smoothly,callback:function(t){e.$set(e.model,"smoothly",t)},expression:"model.smoothly"}},e._l(e.items,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"逆风出装"}},[a("el-select",{attrs:{"value-key":"name",multiple:""},model:{value:e.model.hardship,callback:function(t){e.$set(e.model,"hardship",t)},expression:"model.hardship"}},e._l(e.items,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1)],1),a("Tips",{attrs:{model:e.model}}),a("el-form-item",{attrs:{label:"头像"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$http.defaults.baseURL+"/upload",headers:e.headers,"show-file-list":!1,"on-success":function(t){return e.$set(e.model,"avatar",t.url)}}},[e.model.avatar?a("img",{staticClass:"avatar",attrs:{src:e.model.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"背景图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$http.defaults.baseURL+"/upload",headers:e.headers,"show-file-list":!1,"on-success":function(t){return e.$set(e.model,"banner",t.url)}}},[e.model.banner?a("img",{staticClass:"banner",attrs:{src:e.model.banner}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("el-tab-pane",{attrs:{label:"技能",name:"skills"}},[a("el-button",{on:{click:function(t){return e.model.skills.push({})}}},[a("i",{staticClass:"el-icon-plus"},[e._v("添加技能")])]),a("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.skills,(function(t,r){return a("el-col",{key:r,attrs:{md:12}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),a("el-form-item",{attrs:{label:"冷却值"}},[a("el-input",{model:{value:t.delay,callback:function(a){e.$set(t,"delay",a)},expression:"item.delay"}})],1),a("el-form-item",{attrs:{label:"消耗值"}},[a("el-input",{model:{value:t.cost,callback:function(a){e.$set(t,"cost",a)},expression:"item.cost"}})],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.description,callback:function(a){e.$set(t,"description",a)},expression:"item.description"}})],1),a("el-form-item",{attrs:{label:"小提示"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.tips,callback:function(a){e.$set(t,"tips",a)},expression:"item.tips"}})],1),a("el-form-item",{attrs:{label:"图标"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$http.defaults.baseURL+"/upload","show-file-list":!1,"on-success":function(a){return e.$set(t,"icon",a.url)},headers:e.headers}},[t.icon?a("img",{staticClass:"avatar",attrs:{src:t.icon}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.model.skills.splice(r,1)}}},[e._v("删除")])],1)],1)})),1)],1),a("el-tab-pane",{attrs:{label:"英雄",name:"partners"}},[a("el-button",{on:{click:function(t){return e.model.partners.push({})}}},[a("i",{staticClass:"el-icon-plus"},[e._v("添加英雄")])]),a("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.partners,(function(t,r){return a("el-col",{key:r,attrs:{md:12}},[a("el-form-item",{attrs:{label:"英雄"}},[a("el-select",{attrs:{filterable:""},model:{value:t.hero,callback:function(a){e.$set(t,"hero",a)},expression:"item.hero"}},e._l(e.heroes,(function(e){return a("el-option",{key:e._id,attrs:{value:e._id,label:e.name}})})),1)],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.description,callback:function(a){e.$set(t,"description",a)},expression:"item.description"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.model.partners.splice(r,1)}}},[e._v("删除")])],1)],1)})),1)],1),a("el-tab-pane",{attrs:{label:"英雄攻略",name:"strategy"}},[a("el-button",{on:{click:function(t){return e.model.strategy.push({})}}},[a("i",{staticClass:"el-icon-plus"},[e._v("英雄攻略")])]),a("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.strategy,(function(t,r){return a("el-col",{key:r,attrs:{md:12}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"item.title"}})],1),a("el-form-item",{attrs:{label:"播放量"}},[a("el-input",{model:{value:t.play,callback:function(a){e.$set(t,"play",a)},expression:"item.play"}})],1),a("el-form-item",{attrs:{label:"链接(URL)"}},[a("el-input",{model:{value:t.url,callback:function(a){e.$set(t,"url",a)},expression:"item.url"}})],1),a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{"value-format":"timestamp",type:"date",placeholder:"选择日期"},model:{value:t.date,callback:function(a){e.$set(t,"date",a)},expression:"item.date"}})],1),a("el-form-item",{attrs:{label:"封面"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$http.defaults.baseURL+"/upload","show-file-list":!1,"on-success":function(a){return e.$set(t,"image",a.url)},headers:e.headers}},[t.image?a("img",{staticClass:"banner",attrs:{src:t.image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.model.strategy.splice(r,1)}}},[e._v("删除")])],1)],1)})),1)],1)],1),a("el-form-item",{staticStyle:{"margin-top":"1rem"}},[a("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)},l=[],s=a("5530"),n=a("1da1"),o=a("ade3"),i=(a("d81d"),a("96cf"),a("34ce")),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form-item",{attrs:{label:"难度"}},[a("el-rate",{staticStyle:{margin:"0.6rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.difficult,callback:function(t){e.$set(e.model.scores,"difficult",t)},expression:"model.scores.difficult"}})],1),a("el-form-item",{attrs:{label:"技能"}},[a("el-rate",{staticStyle:{margin:"0.6rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.skills,callback:function(t){e.$set(e.model.scores,"skills",t)},expression:"model.scores.skills"}})],1),a("el-form-item",{attrs:{label:"攻击"}},[a("el-rate",{staticStyle:{margin:"0.6rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.attack,callback:function(t){e.$set(e.model.scores,"attack",t)},expression:"model.scores.attack"}})],1),a("el-form-item",{attrs:{label:"生存"}},[a("el-rate",{staticStyle:{margin:"0.6rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.survive,callback:function(t){e.$set(e.model.scores,"survive",t)},expression:"model.scores.survive"}})],1)],1)},u=[],m={props:{model:{type:Object,default:function(){return{}}}},created:function(){}},d=m,p=a("2877"),f=Object(p["a"])(d,c,u,!1,null,"485fde2a",null),b=f.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form-item",{attrs:{label:"使用技巧"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.model.usageTips,callback:function(t){e.$set(e.model,"usageTips",t)},expression:"model.usageTips"}})],1),a("el-form-item",{attrs:{label:"对抗技巧"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.model.battleTips,callback:function(t){e.$set(e.model,"battleTips",t)},expression:"model.battleTips"}})],1),a("el-form-item",{attrs:{label:"团队思路"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.model.teamTips,callback:function(t){e.$set(e.model,"teamTips",t)},expression:"model.teamTips"}})],1)],1)},v=[],k={props:{model:{type:Object,default:function(){return{}}}}},x=k,y=Object(p["a"])(x,h,v,!1,null,"7c4664b4",null),g=y.exports,w=a("b40b"),$={data:function(){return{id:this.$route.params.id,categories:[],items:[],heroes:[],model:Object(o["a"])({name:"",avatar:"",scores:{},skills:[],partners:[],strategy:[],items1:[],items3:[]},"skills",[]),rules:i["a"]}},components:{Score:b,Tips:g},computed:{headers:function(){return{Authorization:"Bearer "+(localStorage.token||"")}}},methods:{save:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:w["a"].create(t,a,t.id,"heros",t.model);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},fetch:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/heros/".concat(e.id));case 2:a=t.sent,e.model=Object(s["a"])(Object(s["a"])({},e.model),a.data);case 4:case"end":return t.stop()}}),t)})))()},fetchCategories:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/categories");case 2:a=t.sent,r="614b45d8fbeeaa6d9c7de0b7",a.data.map((function(t){t.parent&&t.parent._id==r&&e.categories.push(t)}));case 5:case"end":return t.stop()}}),t)})))()},fetchItems:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/items");case 2:a=t.sent,e.items=a.data;case 4:case"end":return t.stop()}}),t)})))()},fetchHeroes:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/heros");case 2:a=t.sent,e.heroes=a.data;case 4:case"end":return t.stop()}}),t)})))()}},created:function(){this.id&&this.fetch(),this.fetchItems(),this.fetchHeroes(),this.fetchCategories()}},_=$,C=(a("efbf"),Object(p["a"])(_,r,l,!1,null,"6905a5ab",null));t["default"]=C.exports},efbf:function(e,t,a){"use strict";a("efff")},efff:function(e,t,a){}}]);
//# sourceMappingURL=chunk-6811800a.408fc0bf.js.map