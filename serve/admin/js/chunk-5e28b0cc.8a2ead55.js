(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e28b0cc"],{"963a":function(e,t,r){"use strict";r("99b4")},"99b4":function(e,t,r){},beab:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v(e._s(e.id?"编辑":"新建")+"广告位")]),r("el-form",{ref:"ruleForm",attrs:{model:e.model,rules:e.rules,"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save("ruleForm")}}},[r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),r("el-form-item",{attrs:{label:"广告位"}},[r("el-button",{on:{click:function(t){return e.model.items.push({})}}},[r("i",{staticClass:"el-icon-plus"}),e._v("添加广告 ")]),r("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.items,(function(t,a){return r("el-col",{key:a,attrs:{md:16}},[r("el-form-item",{attrs:{label:"跳转链接 (URL) "}},[r("el-input",{model:{value:t.url,callback:function(r){e.$set(t,"url",r)},expression:"item.url"}})],1),r("el-form-item",{staticStyle:{"margin-top":"0.5rem"},attrs:{label:"图片"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$http.defaults.baseURL+"/upload","show-file-list":!1,"on-success":function(r){return e.$set(t,"image",r.url)},headers:e.headers}},[t.image?r("img",{staticClass:"avatar",attrs:{src:t.image}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",[r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.model.items.splice(a,1)}}},[e._v("删除")])],1)],1)})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)},n=[],s=r("5530"),i=r("1da1"),l=(r("96cf"),r("34ce")),u={data:function(){return{id:this.$route.params.id,model:{name:"",items:[]},rules:l["a"]}},computed:{headers:function(){return{Authorization:"Bearer "+(localStorage.token||"")}}},methods:{save:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=14;break}if(!t.id){e.next=7;break}return e.next=4,t.$http.put("rest/ads/".concat(t.id),t.model);case 4:e.sent,e.next=10;break;case 7:return e.next=9,t.$http.post("rest/ads",t.model);case 9:e.sent;case 10:t.$router.push("/ads/list"),t.$message.success("保存成功"),e.next=15;break;case 14:return e.abrupt("return",t.$message.warning("内容不能为空"));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},fetch:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/ads/".concat(e.id));case 2:r=t.sent,e.model=Object(s["a"])(Object(s["a"])({},e.model),r.data);case 4:case"end":return t.stop()}}),t)})))()}},created:function(){this.id&&this.fetch()}},o=u,c=(r("963a"),r("2877")),m=Object(c["a"])(o,a,n,!1,null,"22d45459",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-5e28b0cc.8a2ead55.js.map